/*! 
 * Basic.js JavaScript Library v1.0.0 
 * 
 * Copyright 2012, k-factory, yota kanke 
 * Dual licensed under the MIT or GPL Version 2 licenses. 
 * https://github.com/youtakanke/basic.js 
 * 
 * Blog http://kf-plvs-vltra.com/blog/
 */
function Tween2(a,b){Basic.init(this).extend(EventDispatcher);this.initialize(a,b)}
Tween2.prototype={initialize:function(a,b){this._loopFlag=b||!1;this._nowObj={};this.target=a;this._firstObj={};this._thread=[];this._dilayFlag=!1;this._fps=stage.fps},loop:function(a){this._thread.push({type:"loop",value:a});return this},_loop:function(a){this._next();this._loopFlag=a},wait:function(a){this._thread.push({type:"wait",value:a});this._dilay();return this},_wait:function(a){this._waitStartTime={start:(new Date).getTime(),msec:a};this._wID=setTimeout(function(a){a._next()},a,this)},call:function(a,
b){this._thread.push({type:"call",value:[a,b]});this._dilay();return this},_call:function(a,b){if(b)b[a]();else a();this._loopFlag&&this._thread.push(this._nowThread);this._next();return this},to:function(a,b,c,e){this._thread.push({type:"to",value:[a,b,c,e]});this._dilay();return this},_to:function(a,b,c,e){this._waitStartTime={start:(new Date).getTime(),msec:b};var d=this,h=b*stage.fps/1E3,g=e||0;this._count=e||0;this._easing=c||"easeout";this._easing=this._easing.replace(/-/g,"");this._changeObj=
a;this._duration=b/1E3;this._transFormObj={};this._noTransFormObj={};this._firstObj={};for(var f in a)if(this._firstObj[f]=this.target[f],-1!=f.indexOf("scale")||-1!=f.indexOf("rotation")){"scale"==f&&(this._firstObj.scaleX=this.target.scaleX,this._firstObj.scaleY=this.target.scaleY);var j=!0;this._transFormObj[f]=a[f]}else this._noTransFormObj[f]=a[f];d._count=g;this._frameTime=Math.round(1E3/stage.fps);j&&d.safariScaleHack(h);d._nID=setInterval(function(){g++;d._count=g;if(g>h){d._count=h;for(var a in d._changeObj)d.target[a]=
d._changeObj[a];d.stop();d._next()}else for(a in d._noTransFormObj)d[d._easing](a)},this._frameTime)},safariScaleHack:function(a,b){var c=this,e=b?b:0;c._nHackID=setTimeout(function(){e++;if(e<a){for(var b in c._transFormObj)if(-1!=b.indexOf("scale")||-1!=b.indexOf("rotation"))c[c._easing](b);c.safariScaleHack(a)}else for(b in c._transFormObj)c.target[b]=c._changeObj[b]},c._frameTime)},_dilay:function(){if(0<this._thread.length&&!this._dilayFlag){this._dilayFlag=!0;this._nowThread=this._thread[0];
var a=this._thread[0].value,b=this._thread[0].type;this._thread.splice(0,1);switch(b){case "loop":this._loop(a);break;case "wait":this._wait(a);break;case "call":this._call(a[0],a[1]);break;case "to":this._to(a[0],a[1],a[2],a[3])}this._loopFlag&&"call"!=b&&this._thread.push(this._nowThread)}},_next:function(){this._dilayFlag=!1;this._dilay()},duration:function(a){this._duration=a},linear:function(a){this.target[a]+=(this._changeObj[a]-this._nowObj[a])*(this._frameTime/(1E3*this._duration))},easeout:function(a){var b=
this._count,c=this._firstObj[a],e=this._changeObj[a]-c,b=b/(this._duration*this._fps),b=b-1;this.target[a]=e*(b*b*b+1)+c},easein:function(a){var b=this._count,c=this._firstObj[a],e=this._changeObj[a]-c,b=b/(this._duration*this._fps);this.target[a]=e*b*b*b+c},easeinout:function(a){var b=this._firstObj[a];this.target[a]=-(this._changeObj[a]-b)/2*(Math.cos(3.1416*this._count/(this._duration*this._fps))-1)+b},x:function(a){this._nowObj.x=this.target.x;this._changeObj.x=a},y:function(a){this._nowObj.y=
this.target.y;this._changeObj.y=a},alpha:function(a){this._nowObj.alpha=this.target.alpha;this._changeObj.alpha=a},scale:function(a){this._nowObj.scaleX=this.target.scaleX;this._nowObj.scaleY=this.target.scaleY;this._changeObj.scaleX=a;this._changeObj.scaleY=a},rotation:function(a){this._nowObj.rotation=this.target.rotation;this._changeObj.rotation=a},scaleX:function(a){this._nowObj.scaleX=this.target.scaleX;this._changeObj.scaleX=a},scaleY:function(a){this._nowObj.scaleY=this.target.scaleY;this._changeObj.scaleY=
a},width:function(a){this._nowObj.width=this.target.width;this._changeObj.width=a},height:function(a){this._nowObj.height=this.target.height;this._changeObj.height=a},stop:function(){clearInterval(this._nID);delete this._nID;clearInterval(this._nHackID);delete this._nHackID;clearTimeout(this._wID);delete this._wID},pause:function(){clearInterval(this._nID);delete this._nID;clearInterval(this._nHackID);delete this._nHackID;clearTimeout(this._wID);delete this._wID;this._restartTime=this._waitStartTime.msec-
((new Date).getTime()-this._waitStartTime.start)},resume:function(){switch(this._nowThread.type){case "wait":this._nowThread.value=this._restartTime;break;case "to":this._nowThread.value[1]=this._restartTime,this._nowThread.value.push(this._count)}this._thread.unshift(this._nowThread);this._next()}};